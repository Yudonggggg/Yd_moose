[Tests]
  # Hughes-Winget (hw) tests match Abaqus
  [hw_reference]
    type = 'Exodiff'
    input = 'shear_top_umat.i'
    exodiff = 'shear_top_umat_out.e'
    library_mode = 'DYNAMIC'
    valgrind = 'NONE'
    cli_args = 'GlobalParams/decomposition_method=HughesWinget'
  []
  [hw_reference_umat_output]
    type = 'RunApp'
    input = 'shear_top_umat.i'
    library_mode = 'DYNAMIC'
    valgrind = 'NONE'
    cli_args = 'GlobalParams/decomposition_method=HughesWinget'
    expect_out = 'STRESS_ 1   -0.1757425\n STRESS_ 2   -0.5954772\n STRESS_ 3   -0.0436915\n STRESS_ 4    0.9835696\n STRESS_ 5    0.0729212\n STRESS_ 6   -0.1727900\n '
                 'STRAIN_ 1    0.0000101\n DSTRAIN_ 1    0.0000037\n STRAIN_ 2   -0.0004222\n DSTRAIN_ 2   -0.0001052\n STRAIN_ 3    0.0001507\n DSTRAIN_ 3    0.0000370\n '
                 'STRAIN_ 4    0.0020475\n DSTRAIN_ 4    0.0005107\n STRAIN_ 5    0.0001519\n DSTRAIN_ 5    0.0000383\n STRAIN_ 6   -0.0003596\n DSTRAIN_ 6   -0.0000896\n '
                 'COORDS_ 1    0.3915195\n COORDS_ 2    0.3857086\n COORDS_ 3    0.3873709'
  []

  # rotated isotropic material module should give the same material (Cauchy) stress
  [hw_rotated]
    type = 'Exodiff'
    input = 'shear_top_umat.i'
    exodiff = 'shear_top_umat_out.e'
    prereq = 'hw_reference'
    library_mode = 'DYNAMIC'
    valgrind = 'NONE'
    cli_args = 'GlobalParams/decomposition_method=HughesWinget Materials/umat/orientation="-30 0 0"'
  []
  # but the stress computed in the intermediate reference frame should be different
  # values match Abaqus
  [hw_rotated_umat_output]
    type = 'RunApp'
    input = 'shear_top_umat.i'
    library_mode = 'DYNAMIC'
    valgrind = 'NONE'
    cli_args = 'GlobalParams/decomposition_method=HughesWinget Materials/umat/orientation="-30 0 0"'
    expect_out = 'STRESS_ 1    0.5677315\n STRESS_ 2   -1.3387362\n STRESS_ 3   -0.0439064\n STRESS_ 4    0.3203801\n STRESS_ 5   -0.0219378\n STRESS_ 6   -0.1868725\n '
                 'STRAIN_ 1    0.0007858\n DSTRAIN_ 1    0.0001968\n STRAIN_ 2   -0.0011977\n DSTRAIN_ 2   -0.0002982\n STRAIN_ 3    0.0001505\n DSTRAIN_ 3    0.0000369\n '
                 'STRAIN_ 4    0.0006666\n DSTRAIN_ 4    0.0001664\n STRAIN_ 5   -0.0000461\n DSTRAIN_ 5   -0.0000109\n STRAIN_ 6   -0.0003887\n DSTRAIN_ 6   -0.0000972\n '
                 'COORDS_ 1    0.3915195\n COORDS_ 2    0.3857086\n COORDS_ 3    0.3873709'
  []

  # spot checked results from using Rashid kinematics to be within ~0.01% at final timestep, about what is expected for the two methods
  [rashid_rotated]
    type = 'Exodiff'
    input = 'shear_top_umat.i'
    exodiff = 'shear_top_umat_rashid_out.e'
    library_mode = 'DYNAMIC'
    valgrind = 'NONE'
    cli_args = 'Materials/umat/orientation="-30 0 0" Outputs/file_base=shear_top_umat_rashid_out'
  []
[]
